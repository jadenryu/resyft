üéØ RESYFT DEPLOYMENT TUTORIAL - YOUR EXACT SETUP
================================================

This tutorial is specifically designed for YOUR Resyft repository with YOUR existing environment variables.
I can see you already have Supabase configured and are using OpenRouter for AI.

WHAT YOU'LL DEPLOY:
- resyft-frontend (Next.js) ‚Üí Vercel
- resyft-backend (Node.js/TypeScript) ‚Üí Railway  
- resyft-ai-service (Python/FastAPI) ‚Üí Railway
- Database: Already configured with Supabase ‚úÖ

üìã PHASE 1: PREPARE YOUR CODE
============================

1.1 Open Terminal and navigate to your project
   cd /Users/jadenryu/Documents/resyft

1.2 Test your frontend builds
   cd resyft-frontend
   npm run build
   
   ‚úÖ If successful, continue
   ‚ùå If errors, fix them first

1.3 Go back to main directory
   cd ..

üêô PHASE 2: PUT YOUR CODE ON GITHUB
==================================

2.1 Create GitHub Repository
   - Go to github.com ‚Üí Sign in
   - Click "New" button ‚Üí Repository name: "resyft"
   - Make it Public ‚Üí Click "Create repository"

2.2 Upload Your Code (Remove sensitive data first!)
   
   IMPORTANT: Remove .env files from git:
   echo ".env" >> .gitignore
   echo ".env.*" >> .gitignore
   echo "*.env" >> .gitignore
   
   Then upload:
   git init
   git add .
   git commit -m "Initial Resyft deployment"
   git branch -M main
   git remote add origin https://github.com/YOUR_USERNAME/resyft.git
   git push -u origin main

ü§ñ PHASE 3: DEPLOY AI SERVICE (PYTHON FASTAPI)
==============================================

3.1 Go to Railway
   - railway.app ‚Üí Login with GitHub
   - Allow repository access

3.2 Deploy AI Service
   - "New Project" ‚Üí "Deploy from GitHub repo"
   - Select "resyft" ‚Üí "Deploy"

3.3 Configure AI Service Settings
   Railway dashboard ‚Üí Settings:
   - Root Directory: resyft-ai-service
   - Start Command: uvicorn main:app --host 0.0.0.0 --port $PORT
   - Python Version: 3.11

3.4 Add AI Service Environment Variables
   Variables tab, add these FROM YOUR EXISTING .ENV:

   Variable Name: PORT
   Value: 8001

   Variable Name: OPENROUTER_API_KEY
   Value: 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

   Variable Name: OPENROUTER_MODEL
   Value: google/gemini-2.5-flash-lite

   Variable Name: PYDANTIC_AI_API_KEY
   Value: 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

   Variable Name: SUPABASE_URL
   Value: https://xygcqrunijtcwrryipmi.supabase.co

   Variable Name: SUPABASE_KEY
   Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5Z2NxcnVuaWp0Y3dycnlpcG1pIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MzY0OTIzNiwiZXhwIjoyMDY5MjI1MjM2fQ.TuVaAlWcBG0mG_r6o0RtN8eO1nd8P21vwTtB-cllfGA

   OPTIONAL - Get real Gemini key:
   Variable Name: GEMINI_API_KEY
   Value: [Get from aistudio.google.com - currently placeholder]

   SKIP Redis for now (Railway has managed Redis if needed later)

3.5 Get Your AI Service URL
   After deployment ‚Üí Settings ‚Üí Domains
   Copy URL like: https://resyft-ai-service-production.up.railway.app
   WRITE THIS DOWN!

üîß PHASE 4: DEPLOY BACKEND (NODE.JS API)
=======================================

4.1 Create Second Railway Project
   Railway dashboard ‚Üí "New Project" ‚Üí "Deploy from GitHub repo"
   Select "resyft" again (same repo, different service)

4.2 Configure Backend Settings
   Settings tab:
   - Root Directory: resyft-backend
   - Start Command: npm start
   - Build Command: npm run build
   - Node Version: 18+

4.3 Add Backend Environment Variables
   Variables tab, add FROM YOUR EXISTING .ENV:

   Variable Name: PORT
   Value: 8000

   Variable Name: SUPABASE_URL
   Value: https://xygcqrunijtcwrryipmi.supabase.co

   Variable Name: SUPABASE_SERVICE_KEY
   Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh5Z2NxcnVuaWp0Y3dycnlpcG1pIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MzY0OTIzNiwiZXhwIjoyMDY5MjI1MjM2fQ.TuVaAlWcBG0mG_r6o0RtN8eO1nd8P21vwTtB-cllfGA

   Variable Name: DATABASE_URL
   Value: postgresql://postgres.xygcqrunijtcwrryipmi:F1owluvssnow!@aws-0-us-east-1.pooler.supabase.com:6543/postgres

   Variable Name: AI_SERVICE_URL
   Value: [YOUR AI SERVICE URL FROM STEP 3.5]

   Variable Name: NODE_ENV
   Value: production

   SKIP Redis for now

4.4 Get Your Backend URL
   Settings ‚Üí Domains
   Copy URL like: https://resyft-backend-production.up.railway.app
   WRITE THIS DOWN!

üåê PHASE 5: DEPLOY FRONTEND (NEXT.JS WEBSITE)
============================================

5.1 Go to Vercel
   vercel.com ‚Üí "Sign Up" ‚Üí "Continue with GitHub"

5.2 Import Project
   "Add New..." ‚Üí "Project" ‚Üí Find "resyft" ‚Üí "Import"

5.3 Configure Frontend Settings
   CRITICAL SETTINGS:
   - Project Name: resyft-frontend
   - Framework: Next.js
   - Root Directory: resyft-frontend ‚¨ÖÔ∏è IMPORTANT!
   - Build Command: npm run build
   - Output Directory: .next

5.4 Add Frontend Environment Variables
   Environment Variables section, add these:

   ‚úÖ ALREADY HAVE (from your Supabase):
   Name: NEXT_PUBLIC_SUPABASE_URL
   Value: https://xygcqrunijtcwrryipmi.supabase.co
   Environment: Production

   Name: NEXT_PUBLIC_SUPABASE_ANON_KEY
   Value: [Need the PUBLIC/ANON key - see step 5.5]
   Environment: Production

   üîÑ NEED TO UPDATE (currently placeholders):
   Name: NEXT_PUBLIC_API_URL
   Value: [YOUR BACKEND URL FROM STEP 4.4]/api
   Environment: Production

   Name: NEXT_PUBLIC_BACKEND_URL
   Value: [YOUR BACKEND URL FROM STEP 4.4]
   Environment: Production

   Name: NEXTAUTH_URL
   Value: https://yourdomain.com
   Environment: Production

   Name: NEXTAUTH_SECRET
   Value: [Generate random 32-character string]
   Environment: Production

5.5 Get Supabase ANON Key (you have service key, need public key)
   - Go to supabase.com ‚Üí Your project
   - Settings (gear icon) ‚Üí API
   - Copy "anon public" key (different from service_role key)
   - Add to Vercel NEXT_PUBLIC_SUPABASE_ANON_KEY

5.6 Deploy Frontend
   Click "Deploy" ‚Üí Wait 2-3 minutes
   Get URL like: https://resyft-frontend-abc123.vercel.app

üåç PHASE 6: CONNECT YOUR CUSTOM DOMAIN
=====================================

6.1 Add Domain to Vercel
   Vercel project ‚Üí Settings ‚Üí Domains ‚Üí "Add Domain"
   Enter your domain ‚Üí "Add"

6.2 Get DNS Records
   Vercel shows DNS records like:
   - A Record: @ ‚Üí 76.76.19.61
   - CNAME: www ‚Üí cname.vercel-dns.com
   COPY THESE!

6.3 Configure Namecheap DNS
   namecheap.com ‚Üí Domain List ‚Üí Manage ‚Üí Advanced DNS
   DELETE existing A/CNAME records
   ADD Vercel's records exactly

6.4 Update CORS for Your Domain
   Railway Backend ‚Üí Variables ‚Üí Add:
   Variable Name: CORS_ORIGINS
   Value: https://yourdomain.com,https://www.yourdomain.com

6.5 Update Frontend Environment Variables
   Vercel ‚Üí Settings ‚Üí Environment Variables ‚Üí Edit:
   NEXTAUTH_URL: Change to https://yourdomain.com
   NEXT_PUBLIC_SITE_URL: Add https://yourdomain.com

6.6 Wait for DNS (2-24 hours)
   Check at whatsmydns.net

üß™ PHASE 7: FINAL TESTING & FIXES
================================

7.1 Test Your Live Site
   - https://yourdomain.com loads ‚úÖ
   - Sign up works ‚úÖ
   - Research analysis works ‚úÖ
   - All features functional ‚úÖ

7.2 Common Issues to Fix:
   
   Issue: "AI analysis not working"
   Fix: Check AI_SERVICE_URL in backend points to your Railway AI service
   
   Issue: "CORS errors"
   Fix: Make sure CORS_ORIGINS includes your domain
   
   Issue: "Database connection errors"
   Fix: Verify DATABASE_URL is correct in backend

üìä YOUR PRODUCTION ARCHITECTURE
==============================

LIVE SYSTEM:
‚îå‚îÄ Frontend (Vercel) ‚îÄ https://yourdomain.com
‚îÇ  ‚îî‚îÄ Next.js with Supabase auth
‚îÇ
‚îú‚îÄ Backend (Railway) ‚îÄ https://backend-url.railway.app  
‚îÇ  ‚îî‚îÄ Node.js API + PostgreSQL
‚îÇ
‚îú‚îÄ AI Service (Railway) ‚îÄ https://ai-service-url.railway.app
‚îÇ  ‚îî‚îÄ Python FastAPI + OpenRouter/Gemini
‚îÇ
‚îî‚îÄ Database (Supabase) ‚îÄ PostgreSQL (already configured)

üîÑ WHAT YOU STILL NEED TO DO
============================

REQUIRED CHANGES FOR PRODUCTION:
‚ñ° Get Supabase ANON key (step 5.5) - Your current .env uses service_role key, need public anon key
‚ñ° Update NEXT_PUBLIC_API_URL with your Railway backend URL from step 4.4
‚ñ° Update NEXT_PUBLIC_BACKEND_URL with your Railway backend URL from step 4.4  
‚ñ° Update NEXTAUTH_URL with your domain name
‚ñ° Generate NEXTAUTH_SECRET (32 random characters) - Use: openssl rand -base64 32
‚ñ° Configure CORS_ORIGINS in backend with your domain
‚ñ° Update AI_SERVICE_URL in backend with your Railway AI service URL from step 3.5

CRITICAL NOTES:
‚Ä¢ Your backend needs requirements.txt or Procfile for Railway deployment
‚Ä¢ Your backend uses TypeScript - Railway needs "npm run build" then "npm start"
‚Ä¢ Make sure backend has proper build script in package.json ‚úÖ (already configured)

OPTIONAL IMPROVEMENTS:
‚ñ° Get real Gemini API key from aistudio.google.com (currently using OpenRouter only)
‚ñ° Set up Redis if you need caching (both services have Redis dependencies)
‚ñ° Add Google Analytics ID
‚ñ° Set up monitoring

üí∞ YOUR MONTHLY COSTS
====================

- Domain: ~$1/month (paid)
- Railway AI Service: ~$5/month
- Railway Backend: ~$5/month  
- Vercel Frontend: Free
- Supabase: Free (already using)
- OpenRouter API: ~$10-30/month (usage-based)
TOTAL: ~$21-41/month

üéØ QUICK START CHECKLIST
=======================

Ready to deploy? Follow these phases in order:
‚ñ° Phase 1: Test builds locally
‚ñ° Phase 2: Upload to GitHub (remove .env files!)
‚ñ° Phase 3: Deploy AI service to Railway
‚ñ° Phase 4: Deploy backend to Railway  
‚ñ° Phase 5: Deploy frontend to Vercel
‚ñ° Phase 6: Connect your domain
‚ñ° Phase 7: Test everything

üÜò TROUBLESHOOTING YOUR SETUP
============================

Problem: "OpenRouter API errors"
Solution: Verify OPENROUTER_API_KEY is valid and has credits

Problem: "Supabase connection issues"  
Solution: Check your Supabase project is active and keys are correct

Problem: "Backend can't reach AI service"
Solution: Verify AI_SERVICE_URL in backend matches your Railway AI service URL

Problem: "CORS errors in browser"
Solution: Make sure CORS_ORIGINS in backend includes your exact domain

Your Resyft platform is ready to go live! üöÄ

The main thing you need is to get the URLs from Railway deployments and update your environment variables accordingly. Everything else is already configured!